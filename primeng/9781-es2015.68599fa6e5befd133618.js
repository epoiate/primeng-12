(self.webpackChunkprimeng=self.webpackChunkprimeng||[]).push([[9781],{49781:function(e,t,n){"use strict";n.d(t,{xc:function(){return o.xc}});var o=n(30844)},30844:function(e,t,n){"use strict";n.d(t,{mp:function(){return ue},xc:function(){return Ne}});var o=n(87368),i=n(72073),r=n(61116),l=n(78230),d=n(65939),s=n(24269),a=n(37329),p=n(10748);const c=function(e){return{"p-treenode-droppoint-active":e}};function h(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"li",4),o.NdJ("drop",function(t){return o.CHM(e),o.oxw(2).onDropPoint(t,-1)})("dragover",function(t){return o.CHM(e),o.oxw(2).onDropPointDragOver(t)})("dragenter",function(t){return o.CHM(e),o.oxw(2).onDropPointDragEnter(t,-1)})("dragleave",function(t){return o.CHM(e),o.oxw(2).onDropPointDragLeave(t)}),o.qZA()}if(2&e){const e=o.oxw(2);o.Q6J("ngClass",o.VKq(1,c,e.draghoverPrev))}}const g=function(e){return{"p-checkbox-disabled":e}},f=function(e,t){return{"p-highlight":e,"p-indeterminate":t}},u=function(e,t){return{"pi-check":e,"pi-minus":t}};function N(e,t){if(1&e&&(o.TgZ(0,"div",13),o.TgZ(1,"div",14),o._UZ(2,"span",15),o.qZA(),o.qZA()),2&e){const e=o.oxw(3);o.Q6J("ngClass",o.VKq(4,g,!1===e.node.selectable)),o.uIk("aria-checked",e.isSelected()),o.xp6(1),o.Q6J("ngClass",o.WLB(6,f,e.isSelected(),e.node.partialSelected)),o.xp6(1),o.Q6J("ngClass",o.WLB(9,u,e.isSelected(),e.node.partialSelected))}}function x(e,t){if(1&e&&o._UZ(0,"span"),2&e){const e=o.oxw(3);o.Tol(e.getIcon())}}function v(e,t){if(1&e&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&e){const e=o.oxw(3);o.xp6(1),o.Oqu(e.node.label)}}function m(e,t){1&e&&o.GkF(0)}const b=function(e){return{$implicit:e}};function C(e,t){if(1&e&&(o.TgZ(0,"span"),o.YNc(1,m,1,0,"ng-container",16),o.qZA()),2&e){const e=o.oxw(3);o.xp6(1),o.Q6J("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",o.VKq(2,b,e.node))}}function S(e,t){if(1&e&&o._UZ(0,"p-treeNode",19),2&e){const e=t.$implicit,n=t.first,i=t.last,r=t.index,l=o.oxw(4);o.Udp("height",l.tree.virtualNodeHeight,"px"),o.Q6J("node",e)("parentNode",l.node)("firstChild",n)("lastChild",i)("index",r)("level",l.level+1)}}function y(e,t){if(1&e&&(o.TgZ(0,"ul",17),o.YNc(1,S,1,8,"p-treeNode",18),o.qZA()),2&e){const e=o.oxw(3);o.Udp("display",e.node.expanded?"block":"none"),o.xp6(1),o.Q6J("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const w=function(e,t){return["p-treenode",e,t]},D=function(e,t,n){return{"p-treenode-selectable":e,"p-treenode-dragover":t,"p-highlight":n}},T=function(e,t){return{"pi-chevron-right":e,"pi-chevron-down":t}};function k(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"li",5),o.TgZ(1,"div",6),o.NdJ("click",function(t){return o.CHM(e),o.oxw(2).onNodeClick(t)})("contextmenu",function(t){return o.CHM(e),o.oxw(2).onNodeRightClick(t)})("touchend",function(){return o.CHM(e),o.oxw(2).onNodeTouchEnd()})("drop",function(t){return o.CHM(e),o.oxw(2).onDropNode(t)})("dragover",function(t){return o.CHM(e),o.oxw(2).onDropNodeDragOver(t)})("dragenter",function(t){return o.CHM(e),o.oxw(2).onDropNodeDragEnter(t)})("dragleave",function(t){return o.CHM(e),o.oxw(2).onDropNodeDragLeave(t)})("dragstart",function(t){return o.CHM(e),o.oxw(2).onDragStart(t)})("dragend",function(t){return o.CHM(e),o.oxw(2).onDragStop(t)})("keydown",function(t){return o.CHM(e),o.oxw(2).onKeyDown(t)}),o.TgZ(2,"button",7),o.NdJ("click",function(t){return o.CHM(e),o.oxw(2).toggle(t)}),o._UZ(3,"span",8),o.qZA(),o.YNc(4,N,3,12,"div",9),o.YNc(5,x,1,2,"span",3),o.TgZ(6,"span",10),o.YNc(7,v,2,1,"span",11),o.YNc(8,C,2,4,"span",11),o.qZA(),o.qZA(),o.YNc(9,y,2,4,"ul",12),o.qZA()}if(2&e){const e=o.oxw(2);o.Q6J("ngClass",o.WLB(17,w,e.node.styleClass||"",e.isLeaf()?"p-treenode-leaf":"")),o.xp6(1),o.Udp("padding-left",e.level*e.indentation+"rem"),o.Q6J("draggable",e.tree.draggableNodes)("ngClass",o.kEZ(20,D,e.tree.selectionMode&&!1!==e.node.selectable,e.draghoverNode,e.isSelected())),o.uIk("tabindex",0)("aria-posinset",e.index+1)("aria-expanded",e.node.expanded)("aria-selected",e.isSelected())("aria-label",e.node.label),o.xp6(1),o.uIk("aria-label",e.tree.togglerAriaLabel),o.xp6(1),o.Q6J("ngClass",o.WLB(24,T,!e.node.expanded,e.node.expanded)),o.xp6(1),o.Q6J("ngIf","checkbox"==e.tree.selectionMode),o.xp6(1),o.Q6J("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),o.xp6(2),o.Q6J("ngIf",!e.tree.getTemplateForNode(e.node)),o.xp6(1),o.Q6J("ngIf",e.tree.getTemplateForNode(e.node)),o.xp6(1),o.Q6J("ngIf",!e.tree.virtualScroll&&e.node.children&&e.node.expanded)}}function M(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"li",4),o.NdJ("drop",function(t){return o.CHM(e),o.oxw(2).onDropPoint(t,1)})("dragover",function(t){return o.CHM(e),o.oxw(2).onDropPointDragOver(t)})("dragenter",function(t){return o.CHM(e),o.oxw(2).onDropPointDragEnter(t,1)})("dragleave",function(t){return o.CHM(e),o.oxw(2).onDropPointDragLeave(t)}),o.qZA()}if(2&e){const e=o.oxw(2);o.Q6J("ngClass",o.VKq(1,c,e.draghoverNext))}}const I=function(e){return{"p-treenode-connector-line":e}};function Z(e,t){if(1&e&&(o.TgZ(0,"td",25),o.TgZ(1,"table",26),o.TgZ(2,"tbody"),o.TgZ(3,"tr"),o._UZ(4,"td",5),o.qZA(),o.TgZ(5,"tr"),o._UZ(6,"td",5),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){const e=o.oxw(3);o.xp6(4),o.Q6J("ngClass",o.VKq(2,I,!e.firstChild)),o.xp6(2),o.Q6J("ngClass",o.VKq(4,I,!e.lastChild))}}const E=function(e,t){return{"pi-plus":e,"pi-minus":t}};function J(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"span",27),o.NdJ("click",function(t){return o.CHM(e),o.oxw(3).toggle(t)}),o.qZA()}if(2&e){const e=o.oxw(3);o.Q6J("ngClass",o.WLB(2,E,!e.node.expanded,e.node.expanded)),o.uIk("aria-label",e.tree.togglerAriaLabel)}}function F(e,t){if(1&e&&o._UZ(0,"span"),2&e){const e=o.oxw(3);o.Tol(e.getIcon())}}function Q(e,t){if(1&e&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&e){const e=o.oxw(3);o.xp6(1),o.Oqu(e.node.label)}}function A(e,t){1&e&&o.GkF(0)}function O(e,t){if(1&e&&(o.TgZ(0,"span"),o.YNc(1,A,1,0,"ng-container",16),o.qZA()),2&e){const e=o.oxw(3);o.xp6(1),o.Q6J("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",o.VKq(2,b,e.node))}}function q(e,t){if(1&e&&o._UZ(0,"p-treeNode",31),2&e){const e=t.first,n=t.last;o.Q6J("node",t.$implicit)("firstChild",e)("lastChild",n)}}function B(e,t){if(1&e&&(o.TgZ(0,"td",28),o.TgZ(1,"div",29),o.YNc(2,q,1,3,"p-treeNode",30),o.qZA(),o.qZA()),2&e){const e=o.oxw(3);o.Udp("display",e.node.expanded?"table-cell":"none"),o.xp6(2),o.Q6J("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const L=function(e){return{"p-treenode-collapsed":e}},H=function(e,t){return{"p-treenode-selectable":e,"p-highlight":t}};function Y(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"table"),o.TgZ(1,"tbody"),o.TgZ(2,"tr"),o.YNc(3,Z,7,6,"td",20),o.TgZ(4,"td",21),o.TgZ(5,"div",22),o.NdJ("click",function(t){return o.CHM(e),o.oxw(2).onNodeClick(t)})("contextmenu",function(t){return o.CHM(e),o.oxw(2).onNodeRightClick(t)})("touchend",function(){return o.CHM(e),o.oxw(2).onNodeTouchEnd()})("keydown",function(t){return o.CHM(e),o.oxw(2).onNodeKeydown(t)}),o.YNc(6,J,1,5,"span",23),o.YNc(7,F,1,2,"span",3),o.TgZ(8,"span",10),o.YNc(9,Q,2,1,"span",11),o.YNc(10,O,2,4,"span",11),o.qZA(),o.qZA(),o.qZA(),o.YNc(11,B,3,4,"td",24),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw(2);o.Tol(e.node.styleClass),o.xp6(3),o.Q6J("ngIf",!e.root),o.xp6(1),o.Q6J("ngClass",o.VKq(10,L,!e.node.expanded)),o.xp6(1),o.Q6J("ngClass",o.WLB(12,H,e.tree.selectionMode,e.isSelected())),o.xp6(1),o.Q6J("ngIf",!e.isLeaf()),o.xp6(1),o.Q6J("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),o.xp6(2),o.Q6J("ngIf",!e.tree.getTemplateForNode(e.node)),o.xp6(1),o.Q6J("ngIf",e.tree.getTemplateForNode(e.node)),o.xp6(1),o.Q6J("ngIf",e.node.children&&e.node.expanded)}}function P(e,t){if(1&e&&(o.YNc(0,h,1,3,"li",1),o.YNc(1,k,10,27,"li",2),o.YNc(2,M,1,3,"li",1),o.YNc(3,Y,12,15,"table",3)),2&e){const e=o.oxw();o.Q6J("ngIf",e.tree.droppableNodes),o.xp6(1),o.Q6J("ngIf",!e.tree.horizontal),o.xp6(1),o.Q6J("ngIf",e.tree.droppableNodes&&e.lastChild),o.xp6(1),o.Q6J("ngIf",e.tree.horizontal)}}const U=["filter"];function z(e,t){if(1&e&&(o.TgZ(0,"div",9),o._UZ(1,"i"),o.qZA()),2&e){const e=o.oxw(2);o.xp6(1),o.Tol("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function V(e,t){1&e&&o.GkF(0)}function K(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",10),o.TgZ(1,"input",11,12),o.NdJ("keydown.enter",function(e){return e.preventDefault()})("input",function(t){return o.CHM(e),o.oxw(2)._filter(t.target.value)}),o.qZA(),o._UZ(3,"span",13),o.qZA()}if(2&e){const e=o.oxw(2);o.xp6(1),o.uIk("placeholder",e.filterPlaceholder)}}function _(e,t){if(1&e&&o._UZ(0,"p-treeNode",18),2&e){const e=t.first,n=t.last,i=t.index;o.Q6J("node",t.$implicit)("firstChild",e)("lastChild",n)("index",i)("level",0)}}function R(e,t){if(1&e&&(o.TgZ(0,"ul",16),o.YNc(1,_,1,5,"p-treeNode",17),o.qZA()),2&e){const e=o.oxw(3);o.uIk("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy),o.xp6(1),o.Q6J("ngForOf",e.getRootNode())("ngForTrackBy",e.trackBy)}}function G(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"div",14),o.YNc(2,R,2,4,"ul",15),o.qZA(),o.BQk()),2&e){const e=o.oxw(2);o.xp6(1),o.Udp("max-height",e.scrollHeight),o.xp6(1),o.Q6J("ngIf",e.getRootNode())}}function W(e,t){if(1&e&&o._UZ(0,"p-treeNode",21),2&e){const e=t.$implicit,n=t.first,i=t.last,r=t.index,l=o.oxw(4);o.Udp("height",l.virtualNodeHeight,"px"),o.Q6J("level",e.level)("rowNode",e)("node",e.node)("firstChild",n)("lastChild",i)("index",r)("indentation",l.indentation)}}function j(e,t){if(1&e&&(o.TgZ(0,"ul",16),o.YNc(1,W,1,9,"p-treeNode",20),o.qZA()),2&e){const e=o.oxw(3);o.uIk("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy),o.xp6(1),o.Q6J("cdkVirtualForOf",e.serializedValue)("cdkVirtualForTrackBy",e.trackBy)("cdkVirtualForTemplateCacheSize",0)}}function $(e,t){if(1&e&&(o.TgZ(0,"cdk-virtual-scroll-viewport",19),o.YNc(1,j,2,5,"ul",15),o.qZA()),2&e){const e=o.oxw(2);o.Udp("height",e.scrollHeight),o.Q6J("itemSize",e.virtualNodeHeight)("minBufferPx",e.minBufferPx)("maxBufferPx",e.maxBufferPx),o.xp6(1),o.Q6J("ngIf",e.getRootNode())}}function X(e,t){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const e=o.oxw(3);o.xp6(1),o.hij(" ",e.emptyMessageLabel," ")}}function ee(e,t){1&e&&o.GkF(0,null,23)}function te(e,t){if(1&e&&(o.TgZ(0,"div",22),o.YNc(1,X,2,1,"ng-container",6),o.YNc(2,ee,2,0,"ng-container",4),o.qZA()),2&e){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),o.xp6(1),o.Q6J("ngTemplateOutlet",e.emptyMessageTemplate)}}function ne(e,t){1&e&&o.GkF(0)}const oe=function(e,t,n,o){return{"p-tree p-component":!0,"p-tree-selectable":e,"p-treenode-dragover":t,"p-tree-loading":n,"p-tree-flex-scrollable":o}};function ie(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",2),o.NdJ("drop",function(t){return o.CHM(e),o.oxw().onDrop(t)})("dragover",function(t){return o.CHM(e),o.oxw().onDragOver(t)})("dragenter",function(){return o.CHM(e),o.oxw().onDragEnter()})("dragleave",function(t){return o.CHM(e),o.oxw().onDragLeave(t)}),o.YNc(1,z,2,2,"div",3),o.YNc(2,V,1,0,"ng-container",4),o.YNc(3,K,4,1,"div",5),o.YNc(4,G,3,3,"ng-container",6),o.YNc(5,$,2,6,"ng-template",null,7,o.W1O),o.YNc(7,te,3,3,"div",8),o.YNc(8,ne,1,0,"ng-container",4),o.qZA()}if(2&e){const e=o.MAs(6),t=o.oxw();o.Tol(t.styleClass),o.Q6J("ngClass",o.l5B(11,oe,t.selectionMode,t.dragHover,t.loading,"flex"===t.scrollHeight))("ngStyle",t.style),o.xp6(1),o.Q6J("ngIf",t.loading),o.xp6(1),o.Q6J("ngTemplateOutlet",t.headerTemplate),o.xp6(1),o.Q6J("ngIf",t.filter),o.xp6(1),o.Q6J("ngIf",!t.virtualScroll)("ngIfElse",e),o.xp6(3),o.Q6J("ngIf",!t.loading&&(null==t.getRootNode()||0===t.getRootNode().length)),o.xp6(1),o.Q6J("ngTemplateOutlet",t.footerTemplate)}}function re(e,t){1&e&&o.GkF(0)}function le(e,t){if(1&e&&(o.TgZ(0,"div",27),o._UZ(1,"i"),o.qZA()),2&e){const e=o.oxw(2);o.xp6(1),o.Tol("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function de(e,t){if(1&e&&(o.TgZ(0,"table"),o._UZ(1,"p-treeNode",28),o.qZA()),2&e){const e=o.oxw(2);o.xp6(1),o.Q6J("node",e.value[0])("root",!0)}}function se(e,t){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const e=o.oxw(3);o.xp6(1),o.hij(" ",e.emptyMessageLabel," ")}}function ae(e,t){1&e&&o.GkF(0,null,23)}function pe(e,t){if(1&e&&(o.TgZ(0,"div",22),o.YNc(1,se,2,1,"ng-container",6),o.YNc(2,ae,2,0,"ng-container",4),o.qZA()),2&e){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),o.xp6(1),o.Q6J("ngTemplateOutlet",e.emptyMessageTemplate)}}function ce(e,t){1&e&&o.GkF(0)}const he=function(e){return{"p-tree p-tree-horizontal p-component":!0,"p-tree-selectable":e}};function ge(e,t){if(1&e&&(o.TgZ(0,"div",24),o.YNc(1,re,1,0,"ng-container",4),o.YNc(2,le,2,2,"div",25),o.YNc(3,de,2,2,"table",26),o.YNc(4,pe,3,3,"div",8),o.YNc(5,ce,1,0,"ng-container",4),o.qZA()),2&e){const e=o.oxw();o.Tol(e.styleClass),o.Q6J("ngClass",o.VKq(9,he,e.selectionMode))("ngStyle",e.style),o.xp6(1),o.Q6J("ngTemplateOutlet",e.headerTemplate),o.xp6(1),o.Q6J("ngIf",e.loading),o.xp6(1),o.Q6J("ngIf",e.value&&e.value[0]),o.xp6(1),o.Q6J("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),o.xp6(1),o.Q6J("ngTemplateOutlet",e.footerTemplate)}}let fe=(()=>{class e{constructor(e){this.tree=e}ngOnInit(){this.node.parent=this.parentNode,this.parentNode&&this.tree.syncNodeOption(this.node,this.tree.value,"parent",this.tree.getNodeWithKey(this.parentNode.key,this.tree.value))}getIcon(){let t;return t=this.node.icon?this.node.icon:this.node.expanded&&this.node.children&&this.node.children.length?this.node.expandedIcon:this.node.collapsedIcon,e.ICON_CLASS+" "+t}isLeaf(){return this.tree.isNodeLeaf(this.node)}toggle(e){this.node.expanded?this.collapse(e):this.expand(e)}expand(e){this.node.expanded=!0,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeExpand.emit({originalEvent:e,node:this.node})}collapse(e){this.node.expanded=!1,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeCollapse.emit({originalEvent:e,node:this.node})}onNodeClick(e){this.tree.onNodeClick(e,this.node)}onNodeKeydown(e){13===e.which&&this.tree.onNodeClick(e,this.node)}onNodeTouchEnd(){this.tree.onNodeTouchEnd()}onNodeRightClick(e){this.tree.onNodeRightClick(e,this.node)}isSelected(){return this.tree.isSelected(this.node)}onDropPoint(e,t){e.preventDefault();let n=this.tree.dragNode,o=this.tree.dragNodeTree!==this.tree||1===t||this.tree.dragNodeIndex!==this.index-1;if(this.tree.allowDrop(n,this.node,this.tree.dragNodeScope)&&o){let o=Object.assign({},this.createDropPointEventMetadata(t));this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index,accept:()=>{this.processPointDrop(o)}}):(this.processPointDrop(o),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index}))}this.draghoverPrev=!1,this.draghoverNext=!1}processPointDrop(e){let t=e.dropNode.parent?e.dropNode.parent.children:this.tree.value;e.dragNodeSubNodes.splice(e.dragNodeIndex,1);let n=this.index;e.position<0?(n=e.dragNodeSubNodes===t?e.dragNodeIndex>e.index?e.index:e.index-1:e.index,t.splice(n,0,e.dragNode)):(n=t.length,t.push(e.dragNode)),this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:e.dragNodeIndex})}createDropPointEventMetadata(e){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node,index:this.index,position:e}}onDropPointDragOver(e){e.dataTransfer.dropEffect="move",e.preventDefault()}onDropPointDragEnter(e,t){this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(t<0?this.draghoverPrev=!0:this.draghoverNext=!0)}onDropPointDragLeave(e){this.draghoverPrev=!1,this.draghoverNext=!1}onDragStart(e){this.tree.draggableNodes&&!1!==this.node.draggable?(e.dataTransfer.setData("text","data"),this.tree.dragDropService.startDrag({tree:this,node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index,scope:this.tree.draggableScope})):e.preventDefault()}onDragStop(e){this.tree.dragDropService.stopDrag({node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index})}onDropNodeDragOver(e){e.dataTransfer.dropEffect="move",this.tree.droppableNodes&&(e.preventDefault(),e.stopPropagation())}onDropNode(e){if(this.tree.droppableNodes&&!1!==this.node.droppable){let t=this.tree.dragNode;if(this.tree.allowDrop(t,this.node,this.tree.dragNodeScope)){let n=Object.assign({},this.createDropNodeEventMetadata());this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:t,dropNode:this.node,index:this.index,accept:()=>{this.processNodeDrop(n)}}):(this.processNodeDrop(n),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:t,dropNode:this.node,index:this.index}))}}e.preventDefault(),e.stopPropagation(),this.draghoverNode=!1}createDropNodeEventMetadata(){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node}}processNodeDrop(e){let t=e.dragNodeIndex;e.dragNodeSubNodes.splice(t,1),e.dropNode.children?e.dropNode.children.push(e.dragNode):e.dropNode.children=[e.dragNode],this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:t})}onDropNodeDragEnter(e){this.tree.droppableNodes&&!1!==this.node.droppable&&this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(this.draghoverNode=!0)}onDropNodeDragLeave(e){if(this.tree.droppableNodes){let t=e.currentTarget.getBoundingClientRect();(e.x>t.left+t.width||e.x<t.left||e.y>=Math.floor(t.top+t.height)||e.y<t.top)&&(this.draghoverNode=!1)}}onKeyDown(e){const t=e.target.parentElement.parentElement;if(!("P-TREENODE"!==t.nodeName||this.tree.contextMenu&&"block"===this.tree.contextMenu.containerViewChild.nativeElement.style.display))switch(e.which){case 40:const n=this.tree.droppableNodes?t.children[1].children[1]:t.children[0].children[1];if(n&&n.children.length>0)this.focusNode(n.children[0]);else{const e=t.nextElementSibling;if(e)this.focusNode(e);else{let e=this.findNextSiblingOfAncestor(t);e&&this.focusNode(e)}}e.preventDefault();break;case 38:if(t.previousElementSibling)this.focusNode(this.findLastVisibleDescendant(t.previousElementSibling));else{let e=this.getParentNodeElement(t);e&&this.focusNode(e)}e.preventDefault();break;case 39:this.node.expanded||this.tree.isNodeLeaf(this.node)||this.expand(e),e.preventDefault();break;case 37:if(this.node.expanded)this.collapse(e);else{let e=this.getParentNodeElement(t);e&&this.focusNode(e)}e.preventDefault();break;case 13:this.tree.onNodeClick(e,this.node),e.preventDefault()}}findNextSiblingOfAncestor(e){let t=this.getParentNodeElement(e);return t?t.nextElementSibling?t.nextElementSibling:this.findNextSiblingOfAncestor(t):null}findLastVisibleDescendant(e){const t=Array.from(e.children).find(e=>s.p.hasClass(e,"p-treenode")).children[1];return t&&t.children.length>0?this.findLastVisibleDescendant(t.children[t.children.length-1]):e}getParentNodeElement(e){const t=e.parentElement.parentElement.parentElement;return"P-TREENODE"===t.tagName?t:null}focusNode(e){this.tree.droppableNodes?e.children[1].children[0].focus():e.children[0].children[0].focus()}}return e.ICON_CLASS="p-treenode-icon ",e.\u0275fac=function(t){return new(t||e)(o.Y36((0,o.Gpc)(()=>ue)))},e.\u0275cmp=o.Xpm({type:e,selectors:[["p-treeNode"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode",node:"node",parentNode:"parentNode",root:"root",index:"index",firstChild:"firstChild",lastChild:"lastChild",level:"level",indentation:"indentation"},decls:1,vars:1,consts:[[3,"ngIf"],["class","p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"class",4,"ngIf"],[1,"p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave"],[3,"ngClass"],["role","treeitem",1,"p-treenode-content",3,"draggable","ngClass","click","contextmenu","touchend","drop","dragover","dragenter","dragleave","dragstart","dragend","keydown"],["type","button","pRipple","","tabindex","-1",1,"p-tree-toggler","p-link",3,"click"],[1,"p-tree-toggler-icon","pi","pi-fw",3,"ngClass"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[1,"p-treenode-label"],[4,"ngIf"],["class","p-treenode-children","style","display: none;","role","group",3,"display",4,"ngIf"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon","pi",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","group",1,"p-treenode-children",2,"display","none"],[3,"node","parentNode","firstChild","lastChild","index","height","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","parentNode","firstChild","lastChild","index","level"],["class","p-treenode-connector",4,"ngIf"],[1,"p-treenode",3,"ngClass"],["tabindex","0",1,"p-treenode-content",3,"ngClass","click","contextmenu","touchend","keydown"],["class","p-tree-toggler pi pi-fw",3,"ngClass","click",4,"ngIf"],["class","p-treenode-children-container",3,"display",4,"ngIf"],[1,"p-treenode-connector"],[1,"p-treenode-connector-table"],[1,"p-tree-toggler","pi","pi-fw",3,"ngClass","click"],[1,"p-treenode-children-container"],[1,"p-treenode-children"],[3,"node","firstChild","lastChild",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild"]],template:function(e,t){1&e&&o.YNc(0,P,4,4,"ng-template",0),2&e&&o.Q6J("ngIf",t.node)},directives:[r.O5,r.mk,p.H,r.tP,r.sg,e],encapsulation:2}),e})(),ue=(()=>{class e{constructor(e,t,n){this.el=e,this.dragDropService=t,this.config=n,this.selectionChange=new o.vpe,this.onNodeSelect=new o.vpe,this.onNodeUnselect=new o.vpe,this.onNodeExpand=new o.vpe,this.onNodeCollapse=new o.vpe,this.onNodeContextMenuSelect=new o.vpe,this.onNodeDrop=new o.vpe,this.layout="vertical",this.metaKeySelection=!0,this.propagateSelectionUp=!0,this.propagateSelectionDown=!0,this.loadingIcon="pi pi-spinner",this.emptyMessage="",this.filterBy="label",this.filterMode="lenient",this.indentation=1.5,this.trackBy=(e,t)=>t,this.onFilter=new o.vpe}ngOnInit(){this.droppableNodes&&(this.dragStartSubscription=this.dragDropService.dragStart$.subscribe(e=>{this.dragNodeTree=e.tree,this.dragNode=e.node,this.dragNodeSubNodes=e.subNodes,this.dragNodeIndex=e.index,this.dragNodeScope=e.scope}),this.dragStopSubscription=this.dragDropService.dragStop$.subscribe(e=>{this.dragNodeTree=null,this.dragNode=null,this.dragNodeSubNodes=null,this.dragNodeIndex=null,this.dragNodeScope=null,this.dragHover=!1}))}ngOnChanges(e){e.value&&this.updateSerializedValue(),e.scrollHeight&&this.virtualScrollBody&&this.virtualScrollBody.ngOnInit()}get horizontal(){return"horizontal"==this.layout}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(l.ws.EMPTY_MESSAGE)}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"empty":this.emptyMessageTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;default:this.templateMap[e.name]=e.template}})}updateSerializedValue(){this.serializedValue=[],this.serializeNodes(null,this.getRootNode(),0,!0)}serializeNodes(e,t,n,o){if(t&&t.length)for(let i of t){i.parent=e;const t={node:i,parent:e,level:n,visible:o&&(!e||e.expanded)};this.serializedValue.push(t),t.visible&&i.expanded&&this.serializeNodes(i,i.children,n+1,t.visible)}}onNodeClick(e,t){let n=e.target;if(!s.p.hasClass(n,"p-tree-toggler")&&!s.p.hasClass(n,"p-tree-toggler-icon")){if(this.selectionMode){if(!1===t.selectable)return;if(this.hasFilteredNodes()&&!(t=this.getNodeWithKey(t.key,this.value)))return;let n=this.findIndexInSelection(t),o=n>=0;if(this.isCheckboxSelectionMode())o?(this.propagateSelectionDown?this.propagateDown(t,!1):this.selection=this.selection.filter((e,t)=>t!=n),this.propagateSelectionUp&&t.parent&&this.propagateUp(t.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.propagateSelectionDown?this.propagateDown(t,!0):this.selection=[...this.selection||[],t],this.propagateSelectionUp&&t.parent&&this.propagateUp(t.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:t}));else if(!this.nodeTouched&&this.metaKeySelection){let i=e.metaKey||e.ctrlKey;o&&i?(this.isSingleSelectionMode()?this.selectionChange.emit(null):(this.selection=this.selection.filter((e,t)=>t!=n),this.selectionChange.emit(this.selection)),this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.isSingleSelectionMode()?this.selectionChange.emit(t):this.isMultipleSelectionMode()&&(this.selection=i&&this.selection||[],this.selection=[...this.selection,t],this.selectionChange.emit(this.selection)),this.onNodeSelect.emit({originalEvent:e,node:t}))}else this.isSingleSelectionMode()?o?(this.selection=null,this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.selection=t,this.onNodeSelect.emit({originalEvent:e,node:t})):o?(this.selection=this.selection.filter((e,t)=>t!=n),this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.selection=[...this.selection||[],t],this.onNodeSelect.emit({originalEvent:e,node:t})),this.selectionChange.emit(this.selection)}this.nodeTouched=!1}}onNodeTouchEnd(){this.nodeTouched=!0}onNodeRightClick(e,t){if(this.contextMenu){let n=e.target;if(n.className&&0===n.className.indexOf("p-tree-toggler"))return;this.findIndexInSelection(t)>=0||(this.isSingleSelectionMode()?this.selectionChange.emit(t):this.selectionChange.emit([t])),this.contextMenu.show(e),this.onNodeContextMenuSelect.emit({originalEvent:e,node:t})}}findIndexInSelection(e){let t=-1;if(this.selectionMode&&this.selection)if(this.isSingleSelectionMode())t=this.selection.key&&this.selection.key===e.key||this.selection==e?0:-1;else for(let n=0;n<this.selection.length;n++){let o=this.selection[n];if(o.key&&o.key===e.key||o==e){t=n;break}}return t}syncNodeOption(e,t,n,o){const i=this.hasFilteredNodes()?this.getNodeWithKey(e.key,t):null;i&&(i[n]=o||e[n])}hasFilteredNodes(){return this.filter&&this.filteredNodes&&this.filteredNodes.length}getNodeWithKey(e,t){for(let n of t){if(n.key===e)return n;if(n.children){let t=this.getNodeWithKey(e,n.children);if(t)return t}}}propagateUp(e,t){if(e.children&&e.children.length){let n=0,o=!1;for(let t of e.children)this.isSelected(t)?n++:t.partialSelected&&(o=!0);if(t&&n==e.children.length)this.selection=[...this.selection||[],e],e.partialSelected=!1;else{if(!t){let t=this.findIndexInSelection(e);t>=0&&(this.selection=this.selection.filter((e,n)=>n!=t))}e.partialSelected=!!(o||n>0&&n!=e.children.length)}this.syncNodeOption(e,this.filteredNodes,"partialSelected")}let n=e.parent;n&&this.propagateUp(n,t)}propagateDown(e,t){let n=this.findIndexInSelection(e);if(t&&-1==n?this.selection=[...this.selection||[],e]:!t&&n>-1&&(this.selection=this.selection.filter((e,t)=>t!=n)),e.partialSelected=!1,this.syncNodeOption(e,this.filteredNodes,"partialSelected"),e.children&&e.children.length)for(let o of e.children)this.propagateDown(o,t)}isSelected(e){return-1!=this.findIndexInSelection(e)}isSingleSelectionMode(){return this.selectionMode&&"single"==this.selectionMode}isMultipleSelectionMode(){return this.selectionMode&&"multiple"==this.selectionMode}isCheckboxSelectionMode(){return this.selectionMode&&"checkbox"==this.selectionMode}isNodeLeaf(e){return 0!=e.leaf&&!(e.children&&e.children.length)}getRootNode(){return this.filteredNodes?this.filteredNodes:this.value}getTemplateForNode(e){return this.templateMap?e.type?this.templateMap[e.type]:this.templateMap.default:null}onDragOver(e){!this.droppableNodes||this.value&&0!==this.value.length||(e.dataTransfer.dropEffect="move",e.preventDefault())}onDrop(e){if(this.droppableNodes&&(!this.value||0===this.value.length)){e.preventDefault();let t=this.dragNode;if(this.allowDrop(t,null,this.dragNodeScope)){let n=this.dragNodeIndex;this.value=this.value||[],this.validateDrop?this.onNodeDrop.emit({originalEvent:e,dragNode:t,dropNode:null,index:n,accept:()=>{this.processTreeDrop(t,n)}}):(this.onNodeDrop.emit({originalEvent:e,dragNode:t,dropNode:null,index:n}),this.processTreeDrop(t,n))}}}processTreeDrop(e,t){this.dragNodeSubNodes.splice(t,1),this.value.push(e),this.dragDropService.stopDrag({node:e})}onDragEnter(){this.droppableNodes&&this.allowDrop(this.dragNode,null,this.dragNodeScope)&&(this.dragHover=!0)}onDragLeave(e){if(this.droppableNodes){let t=e.currentTarget.getBoundingClientRect();(e.x>t.left+t.width||e.x<t.left||e.y>t.top+t.height||e.y<t.top)&&(this.dragHover=!1)}}allowDrop(e,t,n){if(e){if(this.isValidDragScope(n)){let n=!0;if(t)if(e===t)n=!1;else{let o=t.parent;for(;null!=o;){if(o===e){n=!1;break}o=o.parent}}return n}return!1}return!1}isValidDragScope(e){let t=this.droppableScope;if(t){if("string"==typeof t){if("string"==typeof e)return t===e;if(e instanceof Array)return-1!=e.indexOf(t)}else if(t instanceof Array){if("string"==typeof e)return-1!=t.indexOf(e);if(e instanceof Array)for(let n of t)for(let t of e)if(n===t)return!0}return!1}return!0}_filter(e){let t=e;if(""===t)this.filteredNodes=null;else{this.filteredNodes=[];const e=this.filterBy.split(","),n=d.gb.removeAccents(t).toLocaleLowerCase(this.filterLocale),o="strict"===this.filterMode;for(let t of this.value){let i=Object.assign({},t),r={searchFields:e,filterText:n,isStrictMode:o};(o&&(this.findFilteredNodes(i,r)||this.isFilterMatched(i,r))||!o&&(this.isFilterMatched(i,r)||this.findFilteredNodes(i,r)))&&this.filteredNodes.push(i)}}this.updateSerializedValue(),this.onFilter.emit({filter:t,filteredValue:this.filteredNodes})}resetFilter(){this.filteredNodes=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}findFilteredNodes(e,t){if(e){let n=!1;if(e.children){let o=[...e.children];e.children=[];for(let i of o){let o=Object.assign({},i);this.isFilterMatched(o,t)&&(n=!0,e.children.push(o))}}if(n)return e.expanded=!0,!0}}isFilterMatched(e,{searchFields:t,filterText:n,isStrictMode:o}){let i=!1;for(let r of t)d.gb.removeAccents(String(d.gb.resolveFieldData(e,r))).toLocaleLowerCase(this.filterLocale).indexOf(n)>-1&&(i=!0);return(!i||o&&!this.isNodeLeaf(e))&&(i=this.findFilteredNodes(e,{searchFields:t,filterText:n,isStrictMode:o})||i),i}getBlockableElement(){return this.el.nativeElement.children[0]}ngOnDestroy(){this.dragStartSubscription&&this.dragStartSubscription.unsubscribe(),this.dragStopSubscription&&this.dragStopSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(l.Y,8),o.Y36(l.b4))},e.\u0275cmp=o.Xpm({type:e,selectors:[["p-tree"]],contentQueries:function(e,t,n){if(1&e&&o.Suo(n,l.jx,4),2&e){let e;o.iGM(e=o.CRH())&&(t.templates=e)}},viewQuery:function(e,t){if(1&e&&(o.Gf(i.N7,5),o.Gf(U,5)),2&e){let e;o.iGM(e=o.CRH())&&(t.virtualScrollBody=e.first),o.iGM(e=o.CRH())&&(t.filterViewChild=e.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",selectionMode:"selectionMode",selection:"selection",style:"style",styleClass:"styleClass",contextMenu:"contextMenu",layout:"layout",draggableScope:"draggableScope",droppableScope:"droppableScope",draggableNodes:"draggableNodes",droppableNodes:"droppableNodes",metaKeySelection:"metaKeySelection",propagateSelectionUp:"propagateSelectionUp",propagateSelectionDown:"propagateSelectionDown",loading:"loading",loadingIcon:"loadingIcon",emptyMessage:"emptyMessage",ariaLabel:"ariaLabel",togglerAriaLabel:"togglerAriaLabel",ariaLabelledBy:"ariaLabelledBy",validateDrop:"validateDrop",filter:"filter",filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualNodeHeight:"virtualNodeHeight",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx",indentation:"indentation",trackBy:"trackBy"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onNodeContextMenuSelect:"onNodeContextMenuSelect",onNodeDrop:"onNodeDrop",onFilter:"onFilter"},features:[o.TTD],decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"ngClass","ngStyle","drop","dragover","dragenter","dragleave"],["class","p-tree-loading-overlay p-component-overlay",4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tree-filter-container",4,"ngIf"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],["class","p-tree-empty-message",4,"ngIf"],[1,"p-tree-loading-overlay","p-component-overlay"],[1,"p-tree-filter-container"],["type","text","autocomplete","off",1,"p-tree-filter","p-inputtext","p-component",3,"keydown.enter","input"],["filter",""],[1,"p-tree-filter-icon","pi","pi-search"],[1,"p-tree-wrapper"],["class","p-tree-container","role","tree",4,"ngIf"],["role","tree",1,"p-tree-container"],[3,"node","firstChild","lastChild","index","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild","index","level"],[1,"p-tree-wrapper",3,"itemSize","minBufferPx","maxBufferPx"],[3,"level","rowNode","node","firstChild","lastChild","index","height","indentation",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],[3,"level","rowNode","node","firstChild","lastChild","index","indentation"],[1,"p-tree-empty-message"],["emptyFilter",""],[3,"ngClass","ngStyle"],["class","p-tree-loading-mask p-component-overlay",4,"ngIf"],[4,"ngIf"],[1,"p-tree-loading-mask","p-component-overlay"],[3,"node","root"]],template:function(e,t){1&e&&(o.YNc(0,ie,9,16,"div",0),o.YNc(1,ge,6,11,"div",1)),2&e&&(o.Q6J("ngIf",!t.horizontal),o.xp6(1),o.Q6J("ngIf",t.horizontal))},directives:[r.O5,r.mk,r.PC,r.tP,r.sg,fe,i.N7,i.xd,i.x0],styles:[".p-tree-container{overflow:auto}.p-tree-container,.p-treenode-children{margin:0;padding:0;list-style-type:none}.p-tree-wrapper{overflow:auto}.p-tree-toggler,.p-treenode-selectable{cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none}.p-tree-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-treenode-leaf>.p-treenode-content .p-tree-toggler{visibility:hidden}.p-treenode-content{display:flex;align-items:center}.p-tree-filter{width:100%}.p-tree-filter-container{position:relative;display:block;width:100%}.p-tree-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-tree-loading{position:relative;min-height:4rem}.p-tree .p-tree-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-tree-flex-scrollable{display:flex;flex:1;height:100%;flex-direction:column}.p-tree-flex-scrollable .p-tree-wrapper{flex:1}.p-tree .p-treenode-droppoint{height:4px;list-style-type:none}.p-tree .p-treenode-droppoint-active{border:0}.p-tree-horizontal{width:auto;padding-left:0;padding-right:0;overflow:auto}.p-tree.p-tree-horizontal table,.p-tree.p-tree-horizontal td,.p-tree.p-tree-horizontal tr{border-collapse:collapse;margin:0;padding:0;vertical-align:middle}.p-tree-horizontal .p-treenode-content{font-weight:400;padding:.4em 1em .4em .2em;display:flex;align-items:center}.p-tree-horizontal .p-treenode-parent .p-treenode-content{font-weight:400;white-space:nowrap}.p-tree.p-tree-horizontal .p-treenode{background:url(line.39c65dcc08f7edb347b6.gif) repeat-x scroll 50% transparent;padding:.25rem 2.5rem}.p-tree.p-tree-horizontal .p-treenode.p-treenode-collapsed,.p-tree.p-tree-horizontal .p-treenode.p-treenode-leaf{padding-right:0}.p-tree.p-tree-horizontal .p-treenode-children{padding:0;margin:0}.p-tree.p-tree-horizontal .p-treenode-connector{width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-table{height:100%;width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-line{background:url(line.39c65dcc08f7edb347b6.gif) repeat-y scroll 0 0 transparent;width:1px}.p-tree.p-tree-horizontal table{height:0}"],encapsulation:2}),e})(),Ne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[r.ez,i.Cl,a.T],l.m8,i.Cl]}),e})()}}]);